<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CodeCast Demo</title>
  <script src="//www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"></script>
  <style>
    body {
      background: black;
      color: white;
      display: flex;
      align-items: flex-end;
      flex-direction: column;
      height: 100vh;
      margin: 0;
      padding: 1rem;
      box-sizing: border-box;
    }
    google-cast-launcher {
      height: 2.5rem;
      width: 2.5rem;
      margin: 1rem;
      position: absolute;
      right: 0;
      z-index: 1;
    }
    .codeWrapper {
      height: 60%;
      margin: 0 auto 1rem auto;
      position: relative;
    }
    .code {
      height: 100%;
      padding: 1rem;
      border: solid 1px #404040;
      box-sizing: border-box;
    }
    .codeWrapper, .logs {
      max-width: 1500px;
    }
    .codeWrapper, .code, .logs {
      width: 100%;
      font-size: 16px;
      background: #202020;
      color: #ddd;
      resize: none;
    }
    .code:focus, .logs:focus {
      outline: none;
    }
    .logs {
      height: 40%;
      margin: auto;
      border: solid 1px #404040;
      box-sizing: border-box;
    }
    .logs > option {
      padding: 1rem;
      color: #ddd;
      text-overflow: ellipsis;
      overflow: hidden;
    }
    .code, .logs {
      scrollbar-width: none;
    }
    .code::-webkit-scrollbar, .logs::-webkit-scrollbar {
      width: 0px;
    }
  </style>
</head>
<body>
  <div class="codeWrapper">
    <google-cast-launcher></google-cast-launcher>
    <textarea class="code" spellcheck="false"></textarea>
  </div>
  <select name="logs" class="logs" multiple></select>
<script defer>/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/codecast/dist/sender.js":
/*!**********************************************!*\
  !*** ./node_modules/codecast/dist/sender.js ***!
  \**********************************************/
/***/ ((module) => {

!function(e,t){if(true)module.exports=t();else { var n, o; }}(self,(function(){return(()=>{"use strict";var e={d:(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{CodeCast:()=>w});const o={};function n(e){const t=new Promise(((t,n)=>{o[e]={resolve:t,reject:n}}));return o[e].promise=t,o[e]}function r(){return`CodeCast_${Math.random()}`}function s(e,t=25e3){const o=[];for(;""!==e;)o.push(e.slice(0,t)),e=e.slice(t);return o}let c=!1;function i(){return c}function a(e){c=e}const d=[];async function f(e){if("string"!=typeof e)throw Error("No URL provided to send method");return u(await(await fetch(e)).text())}function u(e){if("string"!=typeof e)throw Error("No JS string provided to sendString method");const t=r();return d.push({id:t,code:e}),i()?(l(),n(t).promise):n(t).promise}function l(){if(!i())throw Error("RemotePlayer Not Connected Yet");for(;d.length>0;){const e=d.shift();S(e.id,s(e.code))}}let m;function p(e,t){const{id:n,data:r}=JSON.parse(t);!function(e,t){o[e].resolve(t)}(n,r)}function g(e,t){const{id:n,error:r}=JSON.parse(t);!function(e,t){o[e].reject(t)}(n,r)}function y(){a(!0),l()}function h(){m&&m.sendMessage("urn:x-cast:com.codecast.reload",{})}function S(e,t=[]){m&&t.forEach(((o,n)=>{const s=t.length;!function(e={id:r()}){m&&m.sendMessage("urn:x-cast:com.codecast.send",e)}({code:o,id:e,index:n,length:s})}))}function v(e){e&&(m=e,m.addMessageListener("urn:x-cast:com.codecast.connected",y),m.addMessageListener("urn:x-cast:com.codecast.resolve",p),m.addMessageListener("urn:x-cast:com.codecast.reject",g))}class w{#shouldReload;constructor(e){const t=new cast.framework.RemotePlayer,o=new cast.framework.RemotePlayerController(t),n=cast.framework.RemotePlayerEventType,r=cast.framework.CastContext.getInstance();this.#shouldReload=e??!0,a(t.isConnected??!1),o.addEventListener(n.IS_CONNECTED_CHANGED,(e=>{const t=r.getCurrentSession();a(e.value),v(t),"SESSION_RESUMED"===t?.getSessionState()&&this.#shouldReload&&(h(),a(!1))}))}send=f;sendString=u;reload(){a(!1),h()}}return t})()}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VuZGVyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY29kZWNhc3Qvc2VuZGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIiFmdW5jdGlvbihlLHQpe2lmKFwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlKW1vZHVsZS5leHBvcnRzPXQoKTtlbHNlIGlmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZClkZWZpbmUoW10sdCk7ZWxzZXt2YXIgbz10KCk7Zm9yKHZhciBuIGluIG8pKFwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHM6ZSlbbl09b1tuXX19KHNlbGYsKGZ1bmN0aW9uKCl7cmV0dXJuKCgpPT57XCJ1c2Ugc3RyaWN0XCI7dmFyIGU9e2Q6KHQsbyk9Pntmb3IodmFyIG4gaW4gbyllLm8obyxuKSYmIWUubyh0LG4pJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLHtlbnVtZXJhYmxlOiEwLGdldDpvW25dfSl9LG86KGUsdCk9Pk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHQpLHI6ZT0+e1widW5kZWZpbmVkXCIhPXR5cGVvZiBTeW1ib2wmJlN5bWJvbC50b1N0cmluZ1RhZyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZTpcIk1vZHVsZVwifSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSl9fSx0PXt9O2Uucih0KSxlLmQodCx7Q29kZUNhc3Q6KCk9Pnd9KTtjb25zdCBvPXt9O2Z1bmN0aW9uIG4oZSl7Y29uc3QgdD1uZXcgUHJvbWlzZSgoKHQsbik9PntvW2VdPXtyZXNvbHZlOnQscmVqZWN0Om59fSkpO3JldHVybiBvW2VdLnByb21pc2U9dCxvW2VdfWZ1bmN0aW9uIHIoKXtyZXR1cm5gQ29kZUNhc3RfJHtNYXRoLnJhbmRvbSgpfWB9ZnVuY3Rpb24gcyhlLHQ9MjVlMyl7Y29uc3Qgbz1bXTtmb3IoO1wiXCIhPT1lOylvLnB1c2goZS5zbGljZSgwLHQpKSxlPWUuc2xpY2UodCk7cmV0dXJuIG99bGV0IGM9ITE7ZnVuY3Rpb24gaSgpe3JldHVybiBjfWZ1bmN0aW9uIGEoZSl7Yz1lfWNvbnN0IGQ9W107YXN5bmMgZnVuY3Rpb24gZihlKXtpZihcInN0cmluZ1wiIT10eXBlb2YgZSl0aHJvdyBFcnJvcihcIk5vIFVSTCBwcm92aWRlZCB0byBzZW5kIG1ldGhvZFwiKTtyZXR1cm4gdShhd2FpdChhd2FpdCBmZXRjaChlKSkudGV4dCgpKX1mdW5jdGlvbiB1KGUpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlKXRocm93IEVycm9yKFwiTm8gSlMgc3RyaW5nIHByb3ZpZGVkIHRvIHNlbmRTdHJpbmcgbWV0aG9kXCIpO2NvbnN0IHQ9cigpO3JldHVybiBkLnB1c2goe2lkOnQsY29kZTplfSksaSgpPyhsKCksbih0KS5wcm9taXNlKTpuKHQpLnByb21pc2V9ZnVuY3Rpb24gbCgpe2lmKCFpKCkpdGhyb3cgRXJyb3IoXCJSZW1vdGVQbGF5ZXIgTm90IENvbm5lY3RlZCBZZXRcIik7Zm9yKDtkLmxlbmd0aD4wOyl7Y29uc3QgZT1kLnNoaWZ0KCk7UyhlLmlkLHMoZS5jb2RlKSl9fWxldCBtO2Z1bmN0aW9uIHAoZSx0KXtjb25zdHtpZDpuLGRhdGE6cn09SlNPTi5wYXJzZSh0KTshZnVuY3Rpb24oZSx0KXtvW2VdLnJlc29sdmUodCl9KG4scil9ZnVuY3Rpb24gZyhlLHQpe2NvbnN0e2lkOm4sZXJyb3I6cn09SlNPTi5wYXJzZSh0KTshZnVuY3Rpb24oZSx0KXtvW2VdLnJlamVjdCh0KX0obixyKX1mdW5jdGlvbiB5KCl7YSghMCksbCgpfWZ1bmN0aW9uIGgoKXttJiZtLnNlbmRNZXNzYWdlKFwidXJuOngtY2FzdDpjb20uY29kZWNhc3QucmVsb2FkXCIse30pfWZ1bmN0aW9uIFMoZSx0PVtdKXttJiZ0LmZvckVhY2goKChvLG4pPT57Y29uc3Qgcz10Lmxlbmd0aDshZnVuY3Rpb24oZT17aWQ6cigpfSl7bSYmbS5zZW5kTWVzc2FnZShcInVybjp4LWNhc3Q6Y29tLmNvZGVjYXN0LnNlbmRcIixlKX0oe2NvZGU6byxpZDplLGluZGV4Om4sbGVuZ3RoOnN9KX0pKX1mdW5jdGlvbiB2KGUpe2UmJihtPWUsbS5hZGRNZXNzYWdlTGlzdGVuZXIoXCJ1cm46eC1jYXN0OmNvbS5jb2RlY2FzdC5jb25uZWN0ZWRcIix5KSxtLmFkZE1lc3NhZ2VMaXN0ZW5lcihcInVybjp4LWNhc3Q6Y29tLmNvZGVjYXN0LnJlc29sdmVcIixwKSxtLmFkZE1lc3NhZ2VMaXN0ZW5lcihcInVybjp4LWNhc3Q6Y29tLmNvZGVjYXN0LnJlamVjdFwiLGcpKX1jbGFzcyB3eyNzaG91bGRSZWxvYWQ7Y29uc3RydWN0b3IoZSl7Y29uc3QgdD1uZXcgY2FzdC5mcmFtZXdvcmsuUmVtb3RlUGxheWVyLG89bmV3IGNhc3QuZnJhbWV3b3JrLlJlbW90ZVBsYXllckNvbnRyb2xsZXIodCksbj1jYXN0LmZyYW1ld29yay5SZW1vdGVQbGF5ZXJFdmVudFR5cGUscj1jYXN0LmZyYW1ld29yay5DYXN0Q29udGV4dC5nZXRJbnN0YW5jZSgpO3RoaXMuI3Nob3VsZFJlbG9hZD1lPz8hMCxhKHQuaXNDb25uZWN0ZWQ/PyExKSxvLmFkZEV2ZW50TGlzdGVuZXIobi5JU19DT05ORUNURURfQ0hBTkdFRCwoZT0+e2NvbnN0IHQ9ci5nZXRDdXJyZW50U2Vzc2lvbigpO2EoZS52YWx1ZSksdih0KSxcIlNFU1NJT05fUkVTVU1FRFwiPT09dD8uZ2V0U2Vzc2lvblN0YXRlKCkmJnRoaXMuI3Nob3VsZFJlbG9hZCYmKGgoKSxhKCExKSl9KSl9c2VuZD1mO3NlbmRTdHJpbmc9dTtyZWxvYWQoKXthKCExKSxoKCl9fXJldHVybiB0fSkoKX0pKTsiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be in strict mode.
(() => {
"use strict";
/*!*************************!*\
  !*** ./sender/index.js ***!
  \*************************/
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var codecast_sender__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! codecast/sender */ "./node_modules/codecast/dist/sender.js");
/* harmony import */ var codecast_sender__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(codecast_sender__WEBPACK_IMPORTED_MODULE_0__);


window['__onGCastApiAvailable'] = function(isAvailable) {
  if (isAvailable && window.cast) {
    cast.framework.CastContext.getInstance().setOptions({
      receiverApplicationId: '8FD9262C',
      autoJoinPolicy: chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED
    })

    const player = new cast.framework.RemotePlayer()
    const controller = new cast.framework.RemotePlayerController(player)
    const events = cast.framework.RemotePlayerEventType
    const defaultCode = `const context = cast.framework.CastReceiverContext.getInstance()
const manager = context.getPlayerManager()

manager.load({
  autoplay:true,
  media: {
    contentUrl: 'https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8'
  }
}).then(() => {
  resolve('Content loaded successfully')
}).catch(e => {
  reject(\`Content failed to load: \${JSON.stringify(e)}\`)
})`

    const codeCast = new codecast_sender__WEBPACK_IMPORTED_MODULE_0__.CodeCast()
    const codeInput = document.querySelector('.code')
    const code = sessionStorage.getItem('codecast') || defaultCode
    
    codeInput.value = code

    controller.addEventListener(events.IS_CONNECTED_CHANGED, () => {
      sendCode(codeCast, code)
    })

    document.addEventListener('keydown', (event) => {
      if ((event.ctrlKey || event.metaKey) && event.code === 'KeyS') {
        sessionStorage.setItem('codecast', codeInput.value)
      
        codeCast.reload()
        sendCode(codeCast, codeInput.value)
      } else if (event.code === 'Tab') {
        const code = codeInput.value
        const beforeCode = code.substring(0, codeInput.selectionStart)
        const afterCode = code.substring(codeInput.selectionEnd, code.length)

        codeInput.value = `${beforeCode}  ${afterCode}`
        
        const newCursorPosition = codeInput.value.length - afterCode.length
        codeInput.setSelectionRange(newCursorPosition, newCursorPosition);
      } else {
        return
      }

      event.preventDefault();
    })
  }
}

function appendToConsole(color, value) {
  const option = document.createElement('option')
  const logs = document.querySelector('.logs')
  
  option.innerText = value
  option.disabled = true
  option.style.background = color

  logs.append(option)
  logs.scrollTop = logs.scrollHeight
}

function sendCode(codeCast, code) {
  codeCast.sendString(code)
    .then(data => {
      console.log(data)
      appendToConsole('transparent', data)
    })
    .catch(error => {
      console.error(error)
      appendToConsole('rgba(255, 0, 0, 0.2)', error)
    })
}

})();

/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VuZGVyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY29kZWNhc3QtZGVtby8uL25vZGVfbW9kdWxlcy9jb2RlY2FzdC9kaXN0L3NlbmRlci5qcyIsIndlYnBhY2s6Ly9jb2RlY2FzdC1kZW1vL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2NvZGVjYXN0LWRlbW8vd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vY29kZWNhc3QtZGVtby93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vY29kZWNhc3QtZGVtby93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL2NvZGVjYXN0LWRlbW8vd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9jb2RlY2FzdC1kZW1vLy4vc2VuZGVyL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIiFmdW5jdGlvbihlLHQpe2lmKFwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlKW1vZHVsZS5leHBvcnRzPXQoKTtlbHNlIGlmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZClkZWZpbmUoW10sdCk7ZWxzZXt2YXIgbz10KCk7Zm9yKHZhciBuIGluIG8pKFwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHM6ZSlbbl09b1tuXX19KHNlbGYsKGZ1bmN0aW9uKCl7cmV0dXJuKCgpPT57XCJ1c2Ugc3RyaWN0XCI7dmFyIGU9e2Q6KHQsbyk9Pntmb3IodmFyIG4gaW4gbyllLm8obyxuKSYmIWUubyh0LG4pJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLHtlbnVtZXJhYmxlOiEwLGdldDpvW25dfSl9LG86KGUsdCk9Pk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHQpLHI6ZT0+e1widW5kZWZpbmVkXCIhPXR5cGVvZiBTeW1ib2wmJlN5bWJvbC50b1N0cmluZ1RhZyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZTpcIk1vZHVsZVwifSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSl9fSx0PXt9O2Uucih0KSxlLmQodCx7Q29kZUNhc3Q6KCk9Pnd9KTtjb25zdCBvPXt9O2Z1bmN0aW9uIG4oZSl7Y29uc3QgdD1uZXcgUHJvbWlzZSgoKHQsbik9PntvW2VdPXtyZXNvbHZlOnQscmVqZWN0Om59fSkpO3JldHVybiBvW2VdLnByb21pc2U9dCxvW2VdfWZ1bmN0aW9uIHIoKXtyZXR1cm5gQ29kZUNhc3RfJHtNYXRoLnJhbmRvbSgpfWB9ZnVuY3Rpb24gcyhlLHQ9MjVlMyl7Y29uc3Qgbz1bXTtmb3IoO1wiXCIhPT1lOylvLnB1c2goZS5zbGljZSgwLHQpKSxlPWUuc2xpY2UodCk7cmV0dXJuIG99bGV0IGM9ITE7ZnVuY3Rpb24gaSgpe3JldHVybiBjfWZ1bmN0aW9uIGEoZSl7Yz1lfWNvbnN0IGQ9W107YXN5bmMgZnVuY3Rpb24gZihlKXtpZihcInN0cmluZ1wiIT10eXBlb2YgZSl0aHJvdyBFcnJvcihcIk5vIFVSTCBwcm92aWRlZCB0byBzZW5kIG1ldGhvZFwiKTtyZXR1cm4gdShhd2FpdChhd2FpdCBmZXRjaChlKSkudGV4dCgpKX1mdW5jdGlvbiB1KGUpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlKXRocm93IEVycm9yKFwiTm8gSlMgc3RyaW5nIHByb3ZpZGVkIHRvIHNlbmRTdHJpbmcgbWV0aG9kXCIpO2NvbnN0IHQ9cigpO3JldHVybiBkLnB1c2goe2lkOnQsY29kZTplfSksaSgpPyhsKCksbih0KS5wcm9taXNlKTpuKHQpLnByb21pc2V9ZnVuY3Rpb24gbCgpe2lmKCFpKCkpdGhyb3cgRXJyb3IoXCJSZW1vdGVQbGF5ZXIgTm90IENvbm5lY3RlZCBZZXRcIik7Zm9yKDtkLmxlbmd0aD4wOyl7Y29uc3QgZT1kLnNoaWZ0KCk7UyhlLmlkLHMoZS5jb2RlKSl9fWxldCBtO2Z1bmN0aW9uIHAoZSx0KXtjb25zdHtpZDpuLGRhdGE6cn09SlNPTi5wYXJzZSh0KTshZnVuY3Rpb24oZSx0KXtvW2VdLnJlc29sdmUodCl9KG4scil9ZnVuY3Rpb24gZyhlLHQpe2NvbnN0e2lkOm4sZXJyb3I6cn09SlNPTi5wYXJzZSh0KTshZnVuY3Rpb24oZSx0KXtvW2VdLnJlamVjdCh0KX0obixyKX1mdW5jdGlvbiB5KCl7YSghMCksbCgpfWZ1bmN0aW9uIGgoKXttJiZtLnNlbmRNZXNzYWdlKFwidXJuOngtY2FzdDpjb20uY29kZWNhc3QucmVsb2FkXCIse30pfWZ1bmN0aW9uIFMoZSx0PVtdKXttJiZ0LmZvckVhY2goKChvLG4pPT57Y29uc3Qgcz10Lmxlbmd0aDshZnVuY3Rpb24oZT17aWQ6cigpfSl7bSYmbS5zZW5kTWVzc2FnZShcInVybjp4LWNhc3Q6Y29tLmNvZGVjYXN0LnNlbmRcIixlKX0oe2NvZGU6byxpZDplLGluZGV4Om4sbGVuZ3RoOnN9KX0pKX1mdW5jdGlvbiB2KGUpe2UmJihtPWUsbS5hZGRNZXNzYWdlTGlzdGVuZXIoXCJ1cm46eC1jYXN0OmNvbS5jb2RlY2FzdC5jb25uZWN0ZWRcIix5KSxtLmFkZE1lc3NhZ2VMaXN0ZW5lcihcInVybjp4LWNhc3Q6Y29tLmNvZGVjYXN0LnJlc29sdmVcIixwKSxtLmFkZE1lc3NhZ2VMaXN0ZW5lcihcInVybjp4LWNhc3Q6Y29tLmNvZGVjYXN0LnJlamVjdFwiLGcpKX1jbGFzcyB3eyNzaG91bGRSZWxvYWQ7Y29uc3RydWN0b3IoZSl7Y29uc3QgdD1uZXcgY2FzdC5mcmFtZXdvcmsuUmVtb3RlUGxheWVyLG89bmV3IGNhc3QuZnJhbWV3b3JrLlJlbW90ZVBsYXllckNvbnRyb2xsZXIodCksbj1jYXN0LmZyYW1ld29yay5SZW1vdGVQbGF5ZXJFdmVudFR5cGUscj1jYXN0LmZyYW1ld29yay5DYXN0Q29udGV4dC5nZXRJbnN0YW5jZSgpO3RoaXMuI3Nob3VsZFJlbG9hZD1lPz8hMCxhKHQuaXNDb25uZWN0ZWQ/PyExKSxvLmFkZEV2ZW50TGlzdGVuZXIobi5JU19DT05ORUNURURfQ0hBTkdFRCwoZT0+e2NvbnN0IHQ9ci5nZXRDdXJyZW50U2Vzc2lvbigpO2EoZS52YWx1ZSksdih0KSxcIlNFU1NJT05fUkVTVU1FRFwiPT09dD8uZ2V0U2Vzc2lvblN0YXRlKCkmJnRoaXMuI3Nob3VsZFJlbG9hZCYmKGgoKSxhKCExKSl9KSl9c2VuZD1mO3NlbmRTdHJpbmc9dTtyZWxvYWQoKXthKCExKSxoKCl9fXJldHVybiB0fSkoKX0pKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pYzJWdVpHVnlMbXB6SWl3aWMyOTFjbU5sY3lJNld5SjNaV0p3WVdOck9pOHZZMjlrWldOaGMzUXZjMlZ1WkdWeUxtcHpJbDBzSW5OdmRYSmpaWE5EYjI1MFpXNTBJanBiSWlGbWRXNWpkR2x2YmlobExIUXBlMmxtS0Z3aWIySnFaV04wWENJOVBYUjVjR1Z2WmlCbGVIQnZjblJ6SmlaY0ltOWlhbVZqZEZ3aVBUMTBlWEJsYjJZZ2JXOWtkV3hsS1cxdlpIVnNaUzVsZUhCdmNuUnpQWFFvS1R0bGJITmxJR2xtS0Z3aVpuVnVZM1JwYjI1Y0lqMDlkSGx3Wlc5bUlHUmxabWx1WlNZbVpHVm1hVzVsTG1GdFpDbGtaV1pwYm1Vb1cxMHNkQ2s3Wld4elpYdDJZWElnYnoxMEtDazdabTl5S0haaGNpQnVJR2x1SUc4cEtGd2liMkpxWldOMFhDSTlQWFI1Y0dWdlppQmxlSEJ2Y25SelAyVjRjRzl5ZEhNNlpTbGJibDA5YjF0dVhYMTlLSE5sYkdZc0tHWjFibU4wYVc5dUtDbDdjbVYwZFhKdUtDZ3BQVDU3WENKMWMyVWdjM1J5YVdOMFhDSTdkbUZ5SUdVOWUyUTZLSFFzYnlrOVBudG1iM0lvZG1GeUlHNGdhVzRnYnlsbExtOG9ieXh1S1NZbUlXVXVieWgwTEc0cEppWlBZbXBsWTNRdVpHVm1hVzVsVUhKdmNHVnlkSGtvZEN4dUxIdGxiblZ0WlhKaFlteGxPaUV3TEdkbGREcHZXMjVkZlNsOUxHODZLR1VzZENrOVBrOWlhbVZqZEM1d2NtOTBiM1I1Y0dVdWFHRnpUM2R1VUhKdmNHVnlkSGt1WTJGc2JDaGxMSFFwTEhJNlpUMCtlMXdpZFc1a1pXWnBibVZrWENJaFBYUjVjR1Z2WmlCVGVXMWliMndtSmxONWJXSnZiQzUwYjFOMGNtbHVaMVJoWnlZbVQySnFaV04wTG1SbFptbHVaVkJ5YjNCbGNuUjVLR1VzVTNsdFltOXNMblJ2VTNSeWFXNW5WR0ZuTEh0MllXeDFaVHBjSWsxdlpIVnNaVndpZlNrc1QySnFaV04wTG1SbFptbHVaVkJ5YjNCbGNuUjVLR1VzWENKZlgyVnpUVzlrZFd4bFhDSXNlM1poYkhWbE9pRXdmU2w5ZlN4MFBYdDlPMlV1Y2loMEtTeGxMbVFvZEN4N1EyOWtaVU5oYzNRNktDazlQbmQ5S1R0amIyNXpkQ0J2UFh0OU8yWjFibU4wYVc5dUlHNG9aU2w3WTI5dWMzUWdkRDF1WlhjZ1VISnZiV2x6WlNnb0tIUXNiaWs5UG50dlcyVmRQWHR5WlhOdmJIWmxPblFzY21WcVpXTjBPbTU5ZlNrcE8zSmxkSFZ5YmlCdlcyVmRMbkJ5YjIxcGMyVTlkQ3h2VzJWZGZXWjFibU4wYVc5dUlISW9LWHR5WlhSMWNtNWdRMjlrWlVOaGMzUmZKSHROWVhSb0xuSmhibVJ2YlNncGZXQjlablZ1WTNScGIyNGdjeWhsTEhROU1qVmxNeWw3WTI5dWMzUWdiejFiWFR0bWIzSW9PMXdpWENJaFBUMWxPeWx2TG5CMWMyZ29aUzV6YkdsalpTZ3dMSFFwS1N4bFBXVXVjMnhwWTJVb2RDazdjbVYwZFhKdUlHOTliR1YwSUdNOUlURTdablZ1WTNScGIyNGdhU2dwZTNKbGRIVnliaUJqZldaMWJtTjBhVzl1SUdFb1pTbDdZejFsZldOdmJuTjBJR1E5VzEwN1lYTjVibU1nWm5WdVkzUnBiMjRnWmlobEtYdHBaaWhjSW5OMGNtbHVaMXdpSVQxMGVYQmxiMllnWlNsMGFISnZkeUJGY25KdmNpaGNJazV2SUZWU1RDQndjbTkyYVdSbFpDQjBieUJ6Wlc1a0lHMWxkR2h2WkZ3aUtUdHlaWFIxY200Z2RTaGhkMkZwZENoaGQyRnBkQ0JtWlhSamFDaGxLU2t1ZEdWNGRDZ3BLWDFtZFc1amRHbHZiaUIxS0dVcGUybG1LRndpYzNSeWFXNW5YQ0loUFhSNWNHVnZaaUJsS1hSb2NtOTNJRVZ5Y205eUtGd2lUbThnU2xNZ2MzUnlhVzVuSUhCeWIzWnBaR1ZrSUhSdklITmxibVJUZEhKcGJtY2diV1YwYUc5a1hDSXBPMk52Ym5OMElIUTljaWdwTzNKbGRIVnliaUJrTG5CMWMyZ29lMmxrT25Rc1kyOWtaVHBsZlNrc2FTZ3BQeWhzS0Nrc2JpaDBLUzV3Y205dGFYTmxLVHB1S0hRcExuQnliMjFwYzJWOVpuVnVZM1JwYjI0Z2JDZ3BlMmxtS0NGcEtDa3BkR2h5YjNjZ1JYSnliM0lvWENKU1pXMXZkR1ZRYkdGNVpYSWdUbTkwSUVOdmJtNWxZM1JsWkNCWlpYUmNJaWs3Wm05eUtEdGtMbXhsYm1kMGFENHdPeWw3WTI5dWMzUWdaVDFrTG5Ob2FXWjBLQ2s3VXlobExtbGtMSE1vWlM1amIyUmxLU2w5Zld4bGRDQnRPMloxYm1OMGFXOXVJSEFvWlN4MEtYdGpiMjV6ZEh0cFpEcHVMR1JoZEdFNmNuMDlTbE5QVGk1d1lYSnpaU2gwS1RzaFpuVnVZM1JwYjI0b1pTeDBLWHR2VzJWZExuSmxjMjlzZG1Vb2RDbDlLRzRzY2lsOVpuVnVZM1JwYjI0Z1p5aGxMSFFwZTJOdmJuTjBlMmxrT200c1pYSnliM0k2Y24wOVNsTlBUaTV3WVhKelpTaDBLVHNoWm5WdVkzUnBiMjRvWlN4MEtYdHZXMlZkTG5KbGFtVmpkQ2gwS1gwb2JpeHlLWDFtZFc1amRHbHZiaUI1S0NsN1lTZ2hNQ2tzYkNncGZXWjFibU4wYVc5dUlHZ29LWHR0SmladExuTmxibVJOWlhOellXZGxLRndpZFhKdU9uZ3RZMkZ6ZERwamIyMHVZMjlrWldOaGMzUXVjbVZzYjJGa1hDSXNlMzBwZldaMWJtTjBhVzl1SUZNb1pTeDBQVnRkS1h0dEppWjBMbVp2Y2tWaFkyZ29LQ2h2TEc0cFBUNTdZMjl1YzNRZ2N6MTBMbXhsYm1kMGFEc2hablZ1WTNScGIyNG9aVDE3YVdRNmNpZ3BmU2w3YlNZbWJTNXpaVzVrVFdWemMyRm5aU2hjSW5WeWJqcDRMV05oYzNRNlkyOXRMbU52WkdWallYTjBMbk5sYm1SY0lpeGxLWDBvZTJOdlpHVTZieXhwWkRwbExHbHVaR1Y0T200c2JHVnVaM1JvT25OOUtYMHBLWDFtZFc1amRHbHZiaUIyS0dVcGUyVW1KaWh0UFdVc2JTNWhaR1JOWlhOellXZGxUR2x6ZEdWdVpYSW9YQ0oxY200NmVDMWpZWE4wT21OdmJTNWpiMlJsWTJGemRDNWpiMjV1WldOMFpXUmNJaXg1S1N4dExtRmtaRTFsYzNOaFoyVk1hWE4wWlc1bGNpaGNJblZ5YmpwNExXTmhjM1E2WTI5dExtTnZaR1ZqWVhOMExuSmxjMjlzZG1WY0lpeHdLU3h0TG1Ga1pFMWxjM05oWjJWTWFYTjBaVzVsY2loY0luVnlianA0TFdOaGMzUTZZMjl0TG1OdlpHVmpZWE4wTG5KbGFtVmpkRndpTEdjcEtYMWpiR0Z6Y3lCM2V5TnphRzkxYkdSU1pXeHZZV1E3WTI5dWMzUnlkV04wYjNJb1pTbDdZMjl1YzNRZ2REMXVaWGNnWTJGemRDNW1jbUZ0WlhkdmNtc3VVbVZ0YjNSbFVHeGhlV1Z5TEc4OWJtVjNJR05oYzNRdVpuSmhiV1YzYjNKckxsSmxiVzkwWlZCc1lYbGxja052Ym5SeWIyeHNaWElvZENrc2JqMWpZWE4wTG1aeVlXMWxkMjl5YXk1U1pXMXZkR1ZRYkdGNVpYSkZkbVZ1ZEZSNWNHVXNjajFqWVhOMExtWnlZVzFsZDI5eWF5NURZWE4wUTI5dWRHVjRkQzVuWlhSSmJuTjBZVzVqWlNncE8zUm9hWE11STNOb2IzVnNaRkpsYkc5aFpEMWxQejhoTUN4aEtIUXVhWE5EYjI1dVpXTjBaV1EvUHlFeEtTeHZMbUZrWkVWMlpXNTBUR2x6ZEdWdVpYSW9iaTVKVTE5RFQwNU9SVU5VUlVSZlEwaEJUa2RGUkN3b1pUMCtlMk52Ym5OMElIUTljaTVuWlhSRGRYSnlaVzUwVTJWemMybHZiaWdwTzJFb1pTNTJZV3gxWlNrc2RpaDBLU3hjSWxORlUxTkpUMDVmVWtWVFZVMUZSRndpUFQwOWREOHVaMlYwVTJWemMybHZibE4wWVhSbEtDa21KblJvYVhNdUkzTm9iM1ZzWkZKbGJHOWhaQ1ltS0dnb0tTeGhLQ0V4S1NsOUtTbDljMlZ1WkQxbU8zTmxibVJUZEhKcGJtYzlkVHR5Wld4dllXUW9LWHRoS0NFeEtTeG9LQ2w5ZlhKbGRIVnliaUIwZlNrb0tYMHBLVHNpWFN3aWJXRndjR2x1WjNNaU9pSkJRVUZCSWl3aWMyOTFjbU5sVW05dmRDSTZJaUo5IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsImltcG9ydCB7IENvZGVDYXN0IH0gZnJvbSAnY29kZWNhc3Qvc2VuZGVyJ1xyXG5cclxud2luZG93WydfX29uR0Nhc3RBcGlBdmFpbGFibGUnXSA9IGZ1bmN0aW9uKGlzQXZhaWxhYmxlKSB7XHJcbiAgaWYgKGlzQXZhaWxhYmxlICYmIHdpbmRvdy5jYXN0KSB7XHJcbiAgICBjYXN0LmZyYW1ld29yay5DYXN0Q29udGV4dC5nZXRJbnN0YW5jZSgpLnNldE9wdGlvbnMoe1xyXG4gICAgICByZWNlaXZlckFwcGxpY2F0aW9uSWQ6ICc4RkQ5MjYyQycsXHJcbiAgICAgIGF1dG9Kb2luUG9saWN5OiBjaHJvbWUuY2FzdC5BdXRvSm9pblBvbGljeS5PUklHSU5fU0NPUEVEXHJcbiAgICB9KVxyXG5cclxuICAgIGNvbnN0IHBsYXllciA9IG5ldyBjYXN0LmZyYW1ld29yay5SZW1vdGVQbGF5ZXIoKVxyXG4gICAgY29uc3QgY29udHJvbGxlciA9IG5ldyBjYXN0LmZyYW1ld29yay5SZW1vdGVQbGF5ZXJDb250cm9sbGVyKHBsYXllcilcclxuICAgIGNvbnN0IGV2ZW50cyA9IGNhc3QuZnJhbWV3b3JrLlJlbW90ZVBsYXllckV2ZW50VHlwZVxyXG4gICAgY29uc3QgZGVmYXVsdENvZGUgPSBgY29uc3QgY29udGV4dCA9IGNhc3QuZnJhbWV3b3JrLkNhc3RSZWNlaXZlckNvbnRleHQuZ2V0SW5zdGFuY2UoKVxyXG5jb25zdCBtYW5hZ2VyID0gY29udGV4dC5nZXRQbGF5ZXJNYW5hZ2VyKClcclxuXHJcbm1hbmFnZXIubG9hZCh7XHJcbiAgYXV0b3BsYXk6dHJ1ZSxcclxuICBtZWRpYToge1xyXG4gICAgY29udGVudFVybDogJ2h0dHBzOi8vdGVzdC1zdHJlYW1zLm11eC5kZXYveDM2eGh6ei94MzZ4aHp6Lm0zdTgnXHJcbiAgfVxyXG59KS50aGVuKCgpID0+IHtcclxuICByZXNvbHZlKCdDb250ZW50IGxvYWRlZCBzdWNjZXNzZnVsbHknKVxyXG59KS5jYXRjaChlID0+IHtcclxuICByZWplY3QoXFxgQ29udGVudCBmYWlsZWQgdG8gbG9hZDogXFwke0pTT04uc3RyaW5naWZ5KGUpfVxcYClcclxufSlgXHJcblxyXG4gICAgY29uc3QgY29kZUNhc3QgPSBuZXcgQ29kZUNhc3QoKVxyXG4gICAgY29uc3QgY29kZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvZGUnKVxyXG4gICAgY29uc3QgY29kZSA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2NvZGVjYXN0JykgfHwgZGVmYXVsdENvZGVcclxuICAgIFxyXG4gICAgY29kZUlucHV0LnZhbHVlID0gY29kZVxyXG5cclxuICAgIGNvbnRyb2xsZXIuYWRkRXZlbnRMaXN0ZW5lcihldmVudHMuSVNfQ09OTkVDVEVEX0NIQU5HRUQsICgpID0+IHtcclxuICAgICAgc2VuZENvZGUoY29kZUNhc3QsIGNvZGUpXHJcbiAgICB9KVxyXG5cclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZXZlbnQpID0+IHtcclxuICAgICAgaWYgKChldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXkpICYmIGV2ZW50LmNvZGUgPT09ICdLZXlTJykge1xyXG4gICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ2NvZGVjYXN0JywgY29kZUlucHV0LnZhbHVlKVxyXG4gICAgICBcclxuICAgICAgICBjb2RlQ2FzdC5yZWxvYWQoKVxyXG4gICAgICAgIHNlbmRDb2RlKGNvZGVDYXN0LCBjb2RlSW5wdXQudmFsdWUpXHJcbiAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gJ1RhYicpIHtcclxuICAgICAgICBjb25zdCBjb2RlID0gY29kZUlucHV0LnZhbHVlXHJcbiAgICAgICAgY29uc3QgYmVmb3JlQ29kZSA9IGNvZGUuc3Vic3RyaW5nKDAsIGNvZGVJbnB1dC5zZWxlY3Rpb25TdGFydClcclxuICAgICAgICBjb25zdCBhZnRlckNvZGUgPSBjb2RlLnN1YnN0cmluZyhjb2RlSW5wdXQuc2VsZWN0aW9uRW5kLCBjb2RlLmxlbmd0aClcclxuXHJcbiAgICAgICAgY29kZUlucHV0LnZhbHVlID0gYCR7YmVmb3JlQ29kZX0gICR7YWZ0ZXJDb2RlfWBcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBuZXdDdXJzb3JQb3NpdGlvbiA9IGNvZGVJbnB1dC52YWx1ZS5sZW5ndGggLSBhZnRlckNvZGUubGVuZ3RoXHJcbiAgICAgICAgY29kZUlucHV0LnNldFNlbGVjdGlvblJhbmdlKG5ld0N1cnNvclBvc2l0aW9uLCBuZXdDdXJzb3JQb3NpdGlvbik7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KVxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gYXBwZW5kVG9Db25zb2xlKGNvbG9yLCB2YWx1ZSkge1xyXG4gIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpXHJcbiAgY29uc3QgbG9ncyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2dzJylcclxuICBcclxuICBvcHRpb24uaW5uZXJUZXh0ID0gdmFsdWVcclxuICBvcHRpb24uZGlzYWJsZWQgPSB0cnVlXHJcbiAgb3B0aW9uLnN0eWxlLmJhY2tncm91bmQgPSBjb2xvclxyXG5cclxuICBsb2dzLmFwcGVuZChvcHRpb24pXHJcbiAgbG9ncy5zY3JvbGxUb3AgPSBsb2dzLnNjcm9sbEhlaWdodFxyXG59XHJcblxyXG5mdW5jdGlvbiBzZW5kQ29kZShjb2RlQ2FzdCwgY29kZSkge1xyXG4gIGNvZGVDYXN0LnNlbmRTdHJpbmcoY29kZSlcclxuICAgIC50aGVuKGRhdGEgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICBhcHBlbmRUb0NvbnNvbGUoJ3RyYW5zcGFyZW50JywgZGF0YSlcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKVxyXG4gICAgICBhcHBlbmRUb0NvbnNvbGUoJ3JnYmEoMjU1LCAwLCAwLCAwLjIpJywgZXJyb3IpXHJcbiAgICB9KVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7QUFDQTs7QTs7OztBQ0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQ3ZCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDUEE7Ozs7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QSIsInNvdXJjZVJvb3QiOiIifQ==</script></body>
</html>